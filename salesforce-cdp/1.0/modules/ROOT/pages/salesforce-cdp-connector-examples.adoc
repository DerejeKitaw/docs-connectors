= Salesforce CDP Connector 1.0 Examples - Mule 4

The following examples show how to do streaming and bulk operations such as upsert, query, and delete with the Salesforce CDP Connector:

<<Upsert Data - Streaming API>> +
Shows how to upsert data via the streaming api to an object's endpoint.

<<Query Data - Streaming API>> +
Shows how to query data via the streaming api using a custom SOQL query.

<<Delete Data - Streaming API>> +
Shows how to delete records via the streaming api for specific objects.

== Upsert Data - Streaming API

This Mule flow shows how to upsert data via the streaming api to an object's endpoint.
Here is what each operation is doing:

* HTTP Listener: Accepts data from HTTP PUT requests with the connector and object name as uri parameters
* Logger: Shows the HTTP request received from the Listener, then later shows the result from the Upsert Objects operation.
* Upsert Objects:
+
** Authenticates based on your choice between JWT or username password
** Receives the connector name, object name, and payload from before
** Calls the Salesforce API to upsert the payload to that object's endpoint

image::upsert-example-todo.png[]

=== XML for this example

Paste this code into the Studio XML editor to quickly load the flow for this example into your Mule app:

[source,xml,linenums]
----
TODO Paste XML here
----

=== Steps for running this example

// Add these steps to the end of the numbered list:
. Make sure your connector is already configured
. Save the project.
. Test the app by sending a PUT to localhost:8081/{CONNECTOR_NAME}/{OBJECT_NAME} with a JSON payload matching your object's schema.

== Query Data - Streaming API

This Mule flow shows how to query data via the streaming api using a custom SOQL query.
Here is what each operation is doing:

* HTTP Listener: Accepts data from HTTP PUT requests with the query in the payload
* Logger: Shows the HTTP request received from the Listener, then later shows the result from the Upsert Objects operation.
* Query:
+
** Authenticates based on your choice between JWT or username password
** Receives the SOQL query from before
** Calls the Salesforce API with the query and receives the result

image::query-example-todo.png[]

=== XML for this example

Paste this code into the Studio XML editor to quickly load the flow for this example into your Mule app:

[source,xml,linenums]
----
TODO Paste XML here
----

=== Steps for running this example

// Add these steps to the end of the numbered list:
. Make sure your connector is already configured
. Save the project.
. Test the app by sending a PUT to localhost:8081/query with a JSON payload and value for "query" in the body, for example:
[source,json,linenums]
----
{
    "sql": "SELECT ID FROM ACCOUNT LIMIT 1"
}
----

== Delete Data - Streaming API

This Mule flow shows how to delete data via the streaming api using an object's endpoint.
Here is what each operation is doing:

* HTTP Listener: Accepts data from HTTP PUT requests with the connector and object name as uri parameters and record ids as query parameters.
* Logger: Shows the HTTP request received from the Listener, then later shows the result from the Delete Objects operation.
* Delete Objects:
+
** Authenticates based on your choice between JWT or username password
** Receives the connector name, object name, and payload from before
** Calls the Salesforce API to delete the records in the query params using that object's endpoint

image::delete-example-todo.png[]

=== XML for this example

Paste this code into the Studio XML editor to quickly load the flow for this example into your Mule app:

[source,xml,linenums]
----
TODO Paste XML here
----

=== Steps for running this example

// Add these steps to the end of the numbered list:
. Make sure your connector is already configured
. Save the project.
. Test the app by sending a DELETE to localhost:8081/delete/{CONNECTOR_NAME}/{OBJECT_NAME}?ids={RECORD_NUMBER},{RECORD_NUMBER}


//== <Example 2>

// Same template for Example 1

//== <Example 3>
//.
//.
//.

// Use subsections, if needed, to show configuration steps.
//=== Subsection 1
//=== Subsection 2
//=== Subsection 3

== See Also