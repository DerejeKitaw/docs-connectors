= Deploying MQTT3 in a Cluster
:page-aliases: connectors::mqtt3/mqtt3-cluster.adoc

When an MQTT broker has established a connection with a client, it will identify that client by its client ID. If the broker
has an established connection with a client that has the client ID: 'smart-bentley-123' and receives a new connection
with the same client ID, it will close the previous connection (assuming it is stale) and take on the new connection. This is known as a client-takeover
and it is a mechanism employed by the mqtt broker because in some cases TCP connections can reach a half-open or invalid
state (perhaps due to a crash in one of the communication ends), which is undesirable. Therefore, the broker will always
assume the new, incoming connection is the valid one, close the older connection and continue using the newly established
one.

Because of this mechanism, applications that use the MQTT3 Connector in a Cluster will need to generate different Client
IDs for each deployed instance if all nodes are active at the same time.


